<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .backToShop {
            background-color: black;
            color: white;
            width: 200px;
            height: 50px;
            margin-top: 50px;
            border: none;
            outline: none;
        }
        .buttons{
            background-color: black;
            color: white;
            width: 200px;
            height: 50px;
            border: none;
            outline: none;

        }
        .funds-success-message-container {
  font-family: Roboto, "Segoe UI", "Helvetica Neue", sans-serif !important;
  color: #333;
  margin-top: 100px;
  max-width: 500px;
  margin: 0 auto;
}

.funds-checkmark-text-container {
  display: block;
  width: auto !important;
  max-width: 500px;
  margin: 0 auto;
  text-align: center;
}

.funds-checkmark-container {
  height: 40px;
  padding: 0 4px 0 0px;
  display: inline-block;
  width: 70px;
  margin: 0 auto;
}

.funds-checkmark-container:after {
  clear: both;
}

.funds-success-done-text {
  vertical-align: middle;
  margin: 0;
  padding: 15px 0 0 0;
  display: inline;
}

.funds-success-message {
  text-align: center;
  margin-top: 2em;
}

.funds-success-message h2 {
  margin-top: 0px;
}

h1,
h2 {
  font-weight: 700;
  margin-top: 0px;
}

h1 {
  font-size: 28pt;
  margin-top: 45px;
}

h2 {
  font-size: 18pt;
  margin-top: 25px;
}

p {
  font-size: 12pt;
  padding-bottom: 1em;
  line-height: 27.2px;
}

/* CHECKMARK */
.funds-checkmark-circle {
  stroke-dasharray: 166;
  stroke-dashoffset: 166;
  stroke-width: 5;
  stroke-miterlimit: 10;
  stroke: #33bb11;
  fill: none;
  -webkit-animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
  animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
}

.funds-checkmark {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: block;
  stroke-width: 5;
  stroke: #ffffff;
  stroke-miterlimit: 10;
  margin: 10% auto;
  -webkit-box-shadow: inset 0px 0px 0px #33bb11;
  box-shadow: inset 0px 0px 0px #33bb11;
  -webkit-animation: fill 0.4s ease-in-out 0.4s forwards,
    scale 0.3s ease-in-out 0.9s both;
  animation: fill 0.4s ease-in-out 0.4s forwards,
    scale 0.3s ease-in-out 0.9s both;
}

.funds-checkmark-check {
  -webkit-transform-origin: 50% 50%;
  -ms-transform-origin: 50% 50%;
  transform-origin: 50% 50%;
  stroke-dasharray: 48;
  stroke-dashoffset: 48;
  -webkit-animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
  animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
}

.funds-display-on-ie {
  display: none;
}

@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .funds-display-on-ie {
    display: block;
  }

  .funds-checkmark {
    display: none;
  }

  .funds-ie-checkmark-circle {
    stroke-dasharray: 166;
    stroke-dashoffset: 166;
    stroke-width: 5;
    stroke-miterlimit: 10;
    stroke: #33bb11;
    fill: none;
    -webkit-animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
    animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
  }

  .funds-ie-checkmark {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    display: block;
    stroke-width: 5;
    stroke: #ffffff;
    stroke-miterlimit: 10;
    margin: 10% auto;
    -webkit-box-shadow: inset 0px 0px 0px #33bb11;
    box-shadow: inset 0px 0px 0px #33bb11;
    -webkit-animation: fill 0.4s ease-in-out 0.4s forwards,
      scale 0.3s ease-in-out 0.9s both;
    animation: fill 0.4s ease-in-out 0.4s forwards,
      scale 0.3s ease-in-out 0.9s both;
  }

  .funds-ie-checkmark-check {
    -webkit-transform-origin: 50% 50%;
    -ms-transform-origin: 50% 50%;
    transform-origin: 50% 50%;
    -webkit-animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
    animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
  }
}

@-webkit-keyframes stroke {
  100% {
    stroke-dashoffset: 0;
  }
}

@keyframes stroke {
  100% {
    stroke-dashoffset: 0;
  }
}

@-webkit-keyframes scale {
  0%,
  100% {
    -webkit-transform: none;
    transform: none;
  }
  50% {
    -webkit-transform: scale3d(1.1, 1.1, 1);
    transform: scale3d(1.1, 1.1, 1);
  }
}

@keyframes scale {
  0%,
  100% {
    -webkit-transform: none;
    transform: none;
  }
  50% {
    -webkit-transform: scale3d(1.1, 1.1, 1);
    transform: scale3d(1.1, 1.1, 1);
  }
}

@-webkit-keyframes fill {
  100% {
    -webkit-box-shadow: inset 0px 0px 0px 30px #33bb11;
    box-shadow: inset 0px 0px 0px 30px #33bb11;
  }
}

@keyframes fill {
  100% {
    -webkit-box-shadow: inset 0px 0px 0px 30px #33bb11;
    box-shadow: inset 0px 0px 0px 30px #33bb11;
  }
}

@media only screen and (max-width: 768px) {
  .funds-checkmark-text-container {
    display: block;
  }
  .funds-checkmark-container {
    height: auto;
    padding: 0;
    display: block;
    width: 100%;
  }
}

    </style>


<script src="https://unpkg.com/easyinvoice/dist/easyinvoice.min.js"></script>

</head>
<body>
    <div class="funds-success-message-container">
        <div class="funds-checkmark-text-container">
          <div class="funds-checkmark-container">
            <svg class="funds-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="funds-checkmark-circle" cx="26" cy="26" r="25" fill="none"/><path class="funds-checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg> 
            
           <div class="funds-display-on-ie">
             <svg class="funds-ie-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="funds-ie-checkmark-circle" cx="26" cy="26" r="25" fill="none"/><path class="funds-ie-checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg> 
            </div>
          </div>
          
          <h1 class="funds-success-done-text">Done!</h1>
        </div>
        
        <div class="funds-success-message">
          
            
            
          <h2>We think you made the right choice.</h2>
          <p>Thank you for choosing Quix ! Your order is confirmed, and we're already busy processing it.</p>

          <br>
          <br>
          <br>
          <div>
            <form action="/viewOrders" >
                <button class="buttons">View Orders</button>
            </form>
          </div>
          <br>
          <div>
            <form action="/products">
                <button type="submit" class="backToShop">Back to shopping</button>
            </form>
          </div>
          <br>
          <div>
            <form action="">
              <input type="hidden" id="orderId" value="<%= order._id %>">
              <input type="hidden" id="shippingCountry" value="<%= order.shippingAddress.country %>">
              <input type="hidden" id="shippingHouseName" value="<%= order.shippingAddress.houseName %>">
              <input type="hidden" id="shippingFullName" value="<%= order.shippingAddress.fullName %>">
              <input type="hidden" id="shippingMobile" value="<%= order.shippingAddress.mobile %>">
              <input type="hidden" id="shippingPinCode" value="<%= order.shippingAddress.pinCode %>">
              <input type="hidden" id="shippingCity" value="<%= order.shippingAddress.city %>">
              <input type="hidden" id="shippingState" value="<%= order.shippingAddress.state %>">
              <% order.products.forEach((product, index) => { %>
                  <input type="hidden" id="productName_<%= index %>" value="<%= product.productId.productName %>">
                  <input type="hidden" id="productPrice_<%= index %>" value="<%= product.productId.prize %>">
                  <input type="hidden" id="productQuantity_<%= index %>" value="<%= product.quantity %>">
                  <!-- Add more hidden input fields for other product details as needed -->
              <% }); %>
              <button type="button" onclick="downloadInvoice()" class="backToShop">Download Invoice</button>
          </form>
          </div>
          
        </div>
        
      </div>
      <script>
       

          function downloadInvoice() {
    const orderId = document.getElementById("orderId").value;
    const shippingCountry = document.getElementById("shippingCountry").value;
    const shippingHouseName = document.getElementById("shippingHouseName").value;
    const shippingFullName = document.getElementById("shippingFullName").value;
    const shippingMobile = document.getElementById("shippingMobile").value;
    const shippingPinCode = document.getElementById("shippingPinCode").value;
    const shippingCity = document.getElementById("shippingCity").value;
    const shippingState = document.getElementById("shippingState").value;

    // Retrieve product details
    const products = [];
    const productCount = document.querySelectorAll('[id^="productName_"]').length;
    for (let i = 0; i < productCount; i++) {
        const productName = document.getElementById(`productName_${i}`).value;
        const productPrice = parseFloat(document.getElementById(`productPrice_${i}`).value);
        const productQuantity = parseInt(document.getElementById(`productQuantity_${i}`).value);
        products.push({ name: productName, price: productPrice, quantity: productQuantity });
    }

    var data = {
        apiKey: "free",
        mode: "development",
        images: {
            background: "https://public.easyinvoice.cloud/pdf/sample-background.pdf"
        },
        sender: {
            company: "Quix",
            address: "kakkanjery , kinfra industrial park ",
            zip: "687654",
            city: "Calicut",
            country: "country"
        },
        client: {
            company: shippingFullName,
            address: shippingHouseName,
            zip: shippingPinCode,
            city: shippingCity,
            country: shippingCountry,
            mobile: shippingMobile
        },
        information: {
            number: orderId,
            date: new Date().toISOString().split('T')[0], // Current date
            dueDate: '' // Set your due date here
        },
        products: products,
        bottomNotice: "Thanks for choosing us .",
        settings: {
            currency: "INR"
        },
        translate: {}
    };

    easyinvoice.createInvoice(data, function (result) {
        console.log('PDF base64 string: ', result.pdf);
        easyinvoice.download("invoice.pdf");
    });
}
      </script>

     

      
</body>
</html>